<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Books – University Library</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

<!-- NAVBAR -->
<nav class="navbar" id="navbar">
    <div class="logo">University Library</div>
    <div class="nav-links">
        <a href="index.html">Home</a>
        <a href="books.html" class="active">Books</a>
        <a href="categories.html">Categories</a>
        <a href="login.html">Login</a>
    </div>
</nav>

<!-- PAGE HEADER -->
<section class="section" style="margin-top:120px;">
    <h2 class="section-title">Available Books</h2>

    <div style="display:flex; justify-content:center; margin-bottom:18px; gap:10px;">
        <input
            type="search"
            id="searchBooks"
            placeholder="Search by title or author..."
            style="width:70%; padding:12px; border-radius:10px; border:1px solid rgba(230,192,139,0.2); background:#1c130e; color:#f8f4ef;"
        >
    </div>

    <!-- BOOKS GRID -->
    <div class="books-grid" id="booksGrid"></div>
</section>

<!-- FOOTER -->
<footer class="footer">
    © 2025 University Library — All Rights Reserved
</footer>

<!-- NAVBAR SCROLL -->
<script>
const navbar = document.getElementById("navbar");
window.addEventListener("scroll", () => {
    if (window.scrollY > 80) navbar.classList.add("scrolled");
    else navbar.classList.remove("scrolled");
});
</script>

<!-- LOAD BOOKS -->
<script>
let allBooks = [];

fetch("api/books.php")
  .then(res => res.json())
  .then(data => {
    allBooks = data;
    renderBooks(allBooks);
  });

function renderBooks(books) {
    const grid = document.getElementById("booksGrid");
    grid.innerHTML = "";

    if (books.length === 0) {
        grid.innerHTML = "<p style='text-align:center;'>No books found</p>";
        return;
    }

    books.forEach(book => {
        grid.innerHTML += `
            <div class="book-card">
                <img src="images/${book.image}" alt="">
                <h3 class="book-title">${book.title}</h3>
                <p class="book-author">${book.author}</p>
                <a href="book_details.html?id=${book.book_id}"
                   class="btn-gold"
                   style="display:block; text-align:center; margin-top:10px;">
                   Details
                </a>
            </div>
        `;
    });
}

// SEARCH
document.getElementById("searchBooks").addEventListener("input", function () {
    const q = this.value.toLowerCase();

    const filtered = allBooks.filter(book =>
        book.title.toLowerCase().includes(q) ||
        book.author.toLowerCase().includes(q)
    );

    renderBooks(filtered);
});
</script>

</body>
</html>
